<ins data-dcm-click-tracker='%%CLICK_URL_UNESC%%' class='dcmads' style='display:inline-block;width:300px;height:600px'
    data-dcm-placement='N2380205.5817241MOYO/B34441223.432351318'
    data-dcm-rendering-mode='iframe'
    data-dcm-https-only
    data-dcm-api-frameworks='[APIFRAMEWORKS]'
    data-dcm-omid-partner='[OMIDPARTNER]'
    data-dcm-gdpr-applies='gdpr=${GDPR}'
    data-dcm-gdpr-consent='gdpr_consent=${GDPR_CONSENT_755}'
    data-dcm-addtl-consent='addtl_consent=${ADDTL_CONSENT}'
    data-dcm-ltd='false'
    data-dcm-resettable-device-id=''
    data-dcm-app-id=''>
  <script src='https://www.googletagservices.com/dcm/dcmads.js'></script>
</ins>
<!-- NO_REFRESH -->

<script>
    var iframeEl = window.frameElement;
    var iframeParentEl0 = iframeEl.parentElement;
    var iframeParentEl1 = iframeEl.parentElement.parentElement;
    var iframeParentEl2 = iframeEl.parentElement.parentElement.parentElement;
    var iframeParentEl3 = iframeEl.parentElement.parentElement.parentElement.parentElement;
  
    var styleTweak  = "no";
    var styleAd  = "";
    var meta        = window.parent.document.querySelector("meta[property='og:url']");
    var metaKg      = "";
    if(meta != null) {
       metaKg = meta.getAttribute("content");
    }  
/**
if(metaKg.includes("tribunnews.com")) {
   iframeEl.style.width = gam_widthBanner+"px";
   iframeEl.style.height = gam_heightBanner+"px";
   iframeParentEl0.style.height = gam_heightBanner+"px";
   iframeParentEl1.style.height = gam_heightBanner+"px";
   iframeParentEl2.style.height = gam_heightOfSticky+"px";
   styleTweak  = "tribunnews";
}
**/

// Freeze effect
function isInView(element) {
  var rect = element.getBoundingClientRect();
  return (
    rect.top >= 0 &&
    rect.left >= 0 &&
    rect.bottom <= (window.parent.innerHeight || window.parent.documentElement.clientHeight) &&
    rect.right <= (window.parent.innerWidth || document.parent.documentElement.clientWidth)
  );
}

var isElementInView = false;
function freezeAd() {
    var rect = iframeParentEl0.getBoundingClientRect();
    //console.log(rect);
    if (!isElementInView && isInView(iframeParentEl0)) {
        isElementInView = true;
        console.log('Inside ad is VIEWABLE');
        window.parent.document.getElementsByTagName("body")[0].classList.add('frozenB');
        //iframeParentEl0.classList.add('frozenA');
        setTimeout(function() {
            window.parent.document.getElementsByTagName("body")[0].classList.remove('frozenB');
            //iframeParentEl0.classList.remove('frozenA');
        }, 10000); // 10000ms = 10 seconds
    } 
    /**
    else {
        console.log('Inside ad is not in view');
    }
    **/
}    

window.parent.addEventListener('scroll', function() {
  freezeAd();
});

// Add CSS for freeze effect
var styleFreeze = document.createElement('style');
styleFreeze.innerHTML = `
  .frozenA {
    /** 
    position: fixed !important;
    width: 100%;
    z-index: 1000; 
    **/
  }
  .frozenB {
    overflow: hidden !important;
  }
`;
    
//inline style
var referenceElement         = iframeParentEl0;
referenceElement.appendChild(styleFreeze);
</script>